{{#section 'js'}}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.getElementById("formSignup").addEventListener("submit", function(event) {
        event.preventDefault(); 
        const email = document.getElementById("email").value.trim();
        if (email === "") {
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'Email is required.'
            });
            return;
        }
        const password = document.getElementById("password").value;
        if (password === "") {
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'Password is required.'
            });
            return;
        }
        const confirmPassword = document.getElementById("confirmPassword").value;
        if (confirmPassword === "") {
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'Confirm password is required.'
            });
            return;
        }
        if (password !== confirmPassword) {
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'Passwords do not match.'
            });
            return;
        }
        event.target.submit();
    });
</script>
{{/section}}
<section class="py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">

        <!-- Title -->
        <div class="mb-4 text-center">
          <h2 class="text-uppercase">Sign up</h2>
          <p class="text-muted mb-0">
            Create an account to join the online auction.
          </p>
        </div>
        {{!-- Global messages from controller --}}
        {{#if error_message}}
        <div class="alert alert-danger">
          {{error_message}}
        </div>
        {{/if}}

        {{#if success_message}}
        <div class="alert alert-success">
          {{success_message}}
        </div>
        {{/if}}
        <form method="post" action="/account/signup" id="formSignup">
          <!-- Full name -->
          <div class="mb-3">
            <label for="fullname" class="form-label text-uppercase small">Full name</label>
            <input
              type="text"
              class="form-control {{#if errors.fullname}}is-invalid{{/if}}"
              id="fullname"
              name="fullname"
              placeholder="Nguyen Van B"
              value="{{old.fullname}}">
            {{#if errors.fullname}}
            <div class="invalid-feedback">
              {{errors.fullname}}
            </div>
            {{/if}}
          </div>

          <!-- Address -->
          <div class="mb-3">
            <label for="address" class="form-label text-uppercase small">Address</label>
            <input
              type="text"
              class="form-control {{#if errors.address}}is-invalid{{/if}}"
              id="address"
              name="address"
              placeholder="123, Street, District, City"
              value="{{old.address}}">
            {{#if errors.address}}
            <div class="invalid-feedback">
              {{errors.address}}
            </div>
            {{/if}}
          </div>

          <!-- Email -->
          <div class="mb-3">
            <label for="email" class="form-label text-uppercase small">Email</label>
            <input
              type="email"
              class="form-control {{#if errors.email}}is-invalid{{/if}}"
              id="email"
              name="email"
              placeholder="you@example.com"
              value="{{old.email}}">
            <div class="form-text">
              Email must be unique. We will send an OTP to verify your account.
            </div>
            {{#if errors.email}}
            <div class="invalid-feedback">
              {{errors.email}}
            </div>
            {{/if}}
          </div>

          <!-- Password -->
          <div class="mb-3">
            <label for="password" class="form-label text-uppercase small">Password</label>
            <input
              type="password"
              class="form-control {{#if errors.password}}is-invalid{{/if}}"
              id="password"
              name="password"
              placeholder="Enter your password"
              value="{{old.password}}">
            {{#if errors.password}}
            <div class="invalid-feedback">
              {{errors.password}}
            </div>
            {{/if}}
          </div>

          <!-- Confirm Password -->
          <div class="mb-3">
            <label for="confirmPassword" class="form-label text-uppercase small">Confirm password</label>
            <input
              type="password"
              class="form-control {{#if errors.confirmPassword}}is-invalid{{/if}}"
              id="confirmPassword"
              name="confirmPassword"
              placeholder="Re-enter your password"
              value="{{old.confirmPassword}}">
            {{#if errors.confirmPassword}}
            <div class="invalid-feedback">
              {{errors.confirmPassword}}
            </div>
            {{/if}}
          </div>

          <!-- reCAPTCHA -->
          <div class="mb-3">
            <label class="form-label text-uppercase small d-block">Verification</label>
            <!-- Thay recaptchaSiteKey bằng site key thật của bạn -->
            <div>
              <div class="g-recaptcha" data-sitekey="{{recaptchaSiteKey}}"></div>
            </div>
          </div>

          <!-- Submit -->
          <div class="d-grid">
            <button type="submit" class="btn btn-dark text-uppercase">
              Sign up
            </button>
          </div>

          <div class="mt-3 text-center">
            <span class="text-muted small">
              Already have an account?
              <a href="/account/signin" class="text-decoration-none">Sign in</a>
            </span>
          </div>
        </form>

      </div>
    </div>
  </div>
</section>
